<div class="container mt-4">
    <h2>Reporte de Productos Próximos a Vencer</h2>

    <div class="mb-3">
        <label for="diasParaVencer" class="form-label">Mostrar productos a vencer en los próximos:</label>
        <div class="input-group" style="max-width: 250px;">
            <input type="number" class="form-control" id="diasParaVencer" [(ngModel)]="diasParaVencer"
                name="diasParaVencer" min="1" max="365" placeholder="Ej: 30">
            <span class="input-group-text">días</span>
            <button class="btn btn-primary" (click)="cargarProductosAVencer()">Actualizar Reporte</button>
        </div>
        <small class="form-text text-muted">Ingresa un número entre 1 y 365.</small>
    </div>
    <hr>

    <div *ngIf="successMessage" class="alert alert-info mt-3">{{ successMessage }}</div>
    <div *ngIf="errorMessage" class="alert alert-danger mt-3">{{ errorMessage }}</div>

    <div class="table-responsive mt-3">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th scope="col">ID Producto</th>
                    <th scope="col">Producto</th>
                    <th scope="col">Código de Lote</th>
                    <th scope="col">Stock</th>
                    <th scope="col">Fecha de Vencimiento</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngIf="productosAVencer.length === 0">
                    <td colspan="5" class="text-center">No se encontraron productos que venzan en el período
                        seleccionado.</td>
                </tr>
                <tr *ngFor="let producto of productosAVencer">
                    <td>{{ producto.id_producto }}</td>
                    <td>{{ producto.producto_nombre }}</td>
                    <td>{{ producto.codigo_lote }}</td>
                    <td>{{ producto.stock }}</td>
                    <td>{{ producto.fecha_vencimiento }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>